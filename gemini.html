<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Biobazard3d - Dashboard Technique</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">

    <style>
        /* Chart Container Styling Requirements */
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px; /* Constraint width for readability */
            margin-left: auto;
            margin-right: auto;
            height: 300px; /* Base height */
            max-height: 400px; /* Prevent vertical overflow */
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 350px; /* Adjusted height for larger screens */
            }
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f5f9; 
        }
        ::-webkit-scrollbar-thumb {
            background: #cbd5e1; 
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #94a3b8; 
        }

        /* Interactive Elements transitions */
        .interactive-card {
            transition: all 0.3s ease;
        }
        .interactive-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        
        /* Active Tab State */
        .tab-active {
            border-bottom: 2px solid #ea580c; /* Orange-600 */
            color: #ea580c;
        }
    </style>

    </head>
<body class="bg-slate-50 text-slate-800 font-sans antialiased selection:bg-orange-200 selection:text-orange-900">

    <nav class="sticky top-0 z-50 bg-white/90 backdrop-blur-md border-b border-slate-200 shadow-sm">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex items-center gap-3">
                    <div class="bg-slate-900 text-white p-2 rounded-lg">
                        <i class="fa-solid fa-biohazard text-xl text-orange-500"></i>
                    </div>
                    <div>
                        <h1 class="text-xl font-bold tracking-tight text-slate-900">biobazard3d</h1>
                        <p class="text-xs text-slate-500 font-mono">v0.1.0-alpha specs</p>
                    </div>
                </div>

                <div class="hidden md:flex space-x-8">
                    <button onclick="switchView('dashboard')" id="nav-dashboard" class="nav-btn tab-active inline-flex items-center px-1 pt-1 text-sm font-medium text-slate-900 hover:text-orange-600 transition-colors">
                        <i class="fa-solid fa-chart-line mr-2"></i>Vue d'ensemble
                    </button>
                    <button onclick="switchView('architecture')" id="nav-architecture" class="nav-btn inline-flex items-center px-1 pt-1 text-sm font-medium text-slate-500 hover:text-orange-600 transition-colors">
                        <i class="fa-solid fa-sitemap mr-2"></i>Architecture
                    </button>
                    <button onclick="switchView('roadmap')" id="nav-roadmap" class="nav-btn inline-flex items-center px-1 pt-1 text-sm font-medium text-slate-500 hover:text-orange-600 transition-colors">
                        <i class="fa-solid fa-list-check mr-2"></i>Roadmap
                    </button>
                    <button onclick="switchView('standards')" id="nav-standards" class="nav-btn inline-flex items-center px-1 pt-1 text-sm font-medium text-slate-500 hover:text-orange-600 transition-colors">
                        <i class="fa-solid fa-code mr-2"></i>Standards
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 min-h-screen">
        
        <div id="view-dashboard" class="view-section space-y-8 animate-fade-in">
            <div class="text-center max-w-3xl mx-auto mb-12">
                <h2 class="text-3xl font-extrabold text-slate-900 sm:text-4xl">Moteur de Jeu C++ / Vulkan</h2>
                <p class="mt-4 text-lg text-slate-600">
                    Spécifications techniques pour un moteur haute performance, modulaire et orienté données.
                    Conçu pour l'opacité totale du backend et une expérience développeur fluide.
                </p>
            </div>

            <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-8">
                <div class="bg-white p-4 rounded-xl shadow-sm border border-slate-200 flex items-center gap-4">
                    <div class="bg-blue-100 p-3 rounded-lg text-blue-600"><i class="fa-brands fa-cuttlefish text-xl"></i></div>
                    <div>
                        <p class="text-xs text-slate-500 font-bold uppercase">Langage</p>
                        <p class="font-bold text-slate-800">C++20 (Hybrid)</p>
                    </div>
                </div>
                <div class="bg-white p-4 rounded-xl shadow-sm border border-slate-200 flex items-center gap-4">
                    <div class="bg-red-100 p-3 rounded-lg text-red-600"><i class="fa-solid fa-fire text-xl"></i></div>
                    <div>
                        <p class="text-xs text-slate-500 font-bold uppercase">Rendu</p>
                        <p class="font-bold text-slate-800">Vulkan 1.3+</p>
                    </div>
                </div>
                <div class="bg-white p-4 rounded-xl shadow-sm border border-slate-200 flex items-center gap-4">
                    <div class="bg-purple-100 p-3 rounded-lg text-purple-600"><i class="fa-solid fa-cubes text-xl"></i></div>
                    <div>
                        <p class="text-xs text-slate-500 font-bold uppercase">Physique</p>
                        <p class="font-bold text-slate-800">Jolt Physics</p>
                    </div>
                </div>
                <div class="bg-white p-4 rounded-xl shadow-sm border border-slate-200 flex items-center gap-4">
                    <div class="bg-green-100 p-3 rounded-lg text-green-600"><i class="fa-solid fa-file-code text-xl"></i></div>
                    <div>
                        <p class="text-xs text-slate-500 font-bold uppercase">Assets</p>
                        <p class="font-bold text-slate-800">gLTF 2.0</p>
                    </div>
                </div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-200">
                    <div class="mb-4">
                        <h3 class="text-lg font-bold text-slate-900">Philosophie & Priorités</h3>
                        <p class="text-sm text-slate-500">Équilibre technique visé par l'architecture</p>
                    </div>
                    <div class="chart-container">
                        <canvas id="philosophyChart"></canvas>
                    </div>
                </div>
                
                <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-200">
                    <div class="mb-4">
                        <h3 class="text-lg font-bold text-slate-900">Structure Modulaire</h3>
                        <p class="text-sm text-slate-500">Distribution fonctionnelle des systèmes</p>
                    </div>
                    <div class="chart-container">
                        <canvas id="structureChart"></canvas>
                    </div>
                </div>
            </div>
        </div>

        <div id="view-architecture" class="view-section hidden space-y-8 animate-fade-in">
            <div class="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden">
                <div class="p-6 border-b border-slate-200 bg-slate-50">
                    <h2 class="text-2xl font-bold text-slate-900">Explorateur d'Architecture</h2>
                    <p class="text-slate-600 mt-2">
                        Le moteur est divisé en couches strictes. L'utilisateur interagit uniquement avec la 
                        <span class="font-bold text-orange-600">Façade (Core)</span> et les 
                        <span class="font-bold text-blue-600">Composants</span>. 
                        Le <span class="font-bold text-red-600">Backend</span> est totalement opaque.
                    </p>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-3 min-h-[600px]">
                    <div class="lg:col-span-2 p-8 bg-slate-100 flex flex-col gap-6 justify-center">
                        
                        <div class="w-full">
                            <div class="text-xs font-bold text-slate-400 mb-2 uppercase tracking-wider">Application Client (Jeu)</div>
                            <div onclick="selectArchLayer('app')" class="interactive-card cursor-pointer bg-white border-2 border-dashed border-slate-300 rounded-lg p-4 text-center hover:border-orange-400">
                                <span class="font-mono text-sm text-slate-600">main.cpp / Game Logic</span>
                            </div>
                        </div>

                        <div class="flex justify-center"><i class="fa-solid fa-arrow-down text-slate-300"></i></div>

                        <div class="w-full">
                            <div class="text-xs font-bold text-orange-600 mb-2 uppercase tracking-wider">Namespace bb3d:: (API Publique)</div>
                            <div onclick="selectArchLayer('core')" class="interactive-card cursor-pointer bg-orange-600 text-white rounded-lg p-6 shadow-md relative overflow-hidden group">
                                <div class="absolute inset-0 bg-white/10 translate-y-full group-hover:translate-y-0 transition-transform"></div>
                                <div class="relative flex justify-between items-center">
                                    <span class="font-bold text-lg"><i class="fa-solid fa-microchip mr-2"></i>Engine Core & Façade</span>
                                    <i class="fa-solid fa-circle-info opacity-50"></i>
                                </div>
                            </div>
                        </div>

                        <div class="flex justify-center"><i class="fa-solid fa-arrow-down text-slate-300"></i></div>

                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <div class="text-xs font-bold text-blue-600 mb-2 uppercase tracking-wider">Logique & Données</div>
                                <div onclick="selectArchLayer('scene')" class="interactive-card cursor-pointer bg-white border-l-4 border-blue-500 rounded-r-lg p-4 shadow-sm h-full flex flex-col justify-center">
                                    <div class="font-bold text-slate-800"><i class="fa-solid fa-cubes text-blue-500 mr-2"></i>Scene Graph & ECS</div>
                                </div>
                            </div>
                            <div>
                                <div class="text-xs font-bold text-purple-600 mb-2 uppercase tracking-wider">Systèmes Découplés</div>
                                <div onclick="selectArchLayer('systems')" class="interactive-card cursor-pointer bg-white border-l-4 border-purple-500 rounded-r-lg p-4 shadow-sm h-full flex flex-col justify-center">
                                    <div class="font-bold text-slate-800"><i class="fa-solid fa-gears text-purple-500 mr-2"></i>Physics, Audio, Jobs</div>
                                </div>
                            </div>
                        </div>

                        <div class="flex justify-center"><i class="fa-solid fa-arrow-down text-slate-300"></i></div>

                        <div class="w-full">
                            <div class="text-xs font-bold text-red-600 mb-2 uppercase tracking-wider">Backend (Privé / Interne)</div>
                            <div onclick="selectArchLayer('backend')" class="interactive-card cursor-pointer bg-slate-800 text-slate-200 rounded-lg p-4 shadow-inner border border-slate-700">
                                <div class="flex justify-between items-center">
                                    <span class="font-bold"><i class="fa-solid fa-server mr-2"></i>Vulkan Renderer & SDL</span>
                                    <i class="fa-solid fa-lock text-red-500 text-xs" title="Inaccessible"></i>
                                </div>
                            </div>
                        </div>

                    </div>

                    <div class="bg-white border-l border-slate-200 p-8 flex flex-col">
                        <div id="arch-details-placeholder" class="flex-1 flex flex-col items-center justify-center text-slate-400 text-center">
                            <i class="fa-solid fa-hand-pointer text-4xl mb-4 animate-bounce"></i>
                            <p>Cliquez sur une couche<br>pour voir les détails techniques.</p>
                        </div>
                        <div id="arch-details-content" class="hidden animate-fade-in">
                            </div>
                    </div>
                </div>
            </div>
        </div>

        <div id="view-roadmap" class="view-section hidden space-y-8 animate-fade-in">
            <div class="flex justify-between items-end mb-8">
                <div>
                    <h2 class="text-3xl font-extrabold text-slate-900">Planning de Développement</h2>
                    <p class="text-slate-600 mt-2">Exécution séquentielle avec validation par Tests Unitaires (Sandbox).</p>
                </div>
                <div class="bg-orange-50 text-orange-700 px-4 py-2 rounded-lg text-sm font-bold border border-orange-200">
                    <i class="fa-solid fa-rocket mr-2"></i>Objectif: Moteur Fonctionnel
                </div>
            </div>

            <div class="relative border-l-2 border-slate-200 ml-4 space-y-12" id="roadmap-container">
                </div>
        </div>

        <div id="view-standards" class="view-section hidden space-y-8 animate-fade-in">
            <div class="mb-8">
                <h2 class="text-3xl font-extrabold text-slate-900">Standards & Règles</h2>
                <p class="text-slate-600 mt-2">Directives obligatoires pour maintenir l'intégrité, la performance et la portabilité.</p>
            </div>

            <div class="flex flex-wrap gap-2 mb-8">
                <button onclick="filterStandards('all')" class="std-filter active px-4 py-2 bg-slate-200 hover:bg-slate-300 text-slate-800 rounded-full text-sm font-bold transition-colors">Tous</button>
                <button onclick="filterStandards('cpp')" class="std-filter px-4 py-2 bg-white border border-slate-300 hover:border-orange-500 text-slate-600 rounded-full text-sm font-medium transition-colors">C++ Modern</button>
                <button onclick="filterStandards('perf')" class="std-filter px-4 py-2 bg-white border border-slate-300 hover:border-red-500 text-slate-600 rounded-full text-sm font-medium transition-colors">Performance</button>
                <button onclick="filterStandards('arch')" class="std-filter px-4 py-2 bg-white border border-slate-300 hover:border-blue-500 text-slate-600 rounded-full text-sm font-medium transition-colors">Architecture</button>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" id="standards-grid">
                </div>
        </div>

    </main>

    <footer class="bg-white border-t border-slate-200 mt-12 py-8">
        <div class="max-w-7xl mx-auto px-4 text-center">
            <p class="text-slate-400 text-sm">Généré pour le projet <strong>biobazard3d</strong></p>
            <p class="text-xs text-slate-300 mt-2">Basé sur GEMINI.md & ROADMAP.md</p>
        </div>
    </footer>

    <script>
        // --- DATA SOURCE ---
        
        const architectureData = {
            'app': {
                title: "Application Client",
                color: "text-slate-600",
                desc: "Code du jeu final utilisant le moteur.",
                details: [
                    { label: "Rôle", value: "Logique Gameplay, Scripts" },
                    { label: "Contrainte", value: "Utilise uniquement le namespace bb3d::" },
                    { label: "Entrée", value: "main.cpp" }
                ]
            },
            'core': {
                title: "Engine Core (Façade)",
                color: "text-orange-600",
                desc: "Point d'entrée unique et orchestration.",
                details: [
                    { label: "Classes", value: "bb3d::Engine, bb3d::Config" },
                    { label: "Rôle", value: "Init, Boucle Principale, Gestion Globale" },
                    { label: "Outils", value: "Config JSON, HotReloader" },
                    { label: "Modularité", value: "Active/Désactive les sous-systèmes" }
                ]
            },
            'scene': {
                title: "Scene & Logique",
                color: "text-blue-600",
                desc: "Représentation du monde et des données.",
                details: [
                    { label: "ECS", value: "Entity, Component, Scene" },
                    { label: "Maths", value: "Transform (GLM), Camera" },
                    { label: "Assets", value: "Model, Mesh, Texture, Material (PBR)" },
                    { label: "Sérialisation", value: "Non-Intrusive (Templates externes)" }
                ]
            },
            'systems': {
                title: "Systèmes Découplés",
                color: "text-purple-600",
                desc: "Modules fonctionnels indépendants.",
                details: [
                    { label: "Physique", value: "PhysicsWorld, RigidBody (Jolt)" },
                    { label: "Audio", value: "AudioSource (miniaudio)" },
                    { label: "Parallélisme", value: "JobSystem (Thread Pool)" },
                    { label: "Events", value: "EventBus (Pub/Sub)" }
                ]
            },
            'backend': {
                title: "Backend Vulkan",
                color: "text-red-600",
                desc: "Implémentation bas niveau cachée.",
                details: [
                    { label: "API", value: "Vulkan 1.3 (Dynamic Rendering)" },
                    { label: "Gestion Mem", value: "VMA (Vulkan Memory Allocator)" },
                    { label: "Pipeline", value: "Shader SPIR-V, SwapChain" },
                    { label: "Fenêtre", value: "SDL3 (avec fallback SDL2)" }
                ]
            }
        };

        const roadmapData = [
            {
                phase: "Phase 1 : Infrastructure & Core",
                desc: "Fondations C++20 sans GPU.",
                steps: [
                    { id: "1.0", title: "Build System Roots", validation: "CMakeLists.txt", detail: "Configuration C++20, SDL3, spdlog link" },
                    { id: "1.1", title: "Log & Profiling", validation: "unit_test_00_infrastructure.cpp", detail: "spdlog setup, Tracy macros" },
                    { id: "1.2", title: "Fenêtrage & Config", validation: "unit_test_01_window.cpp", detail: "SDL Wrapper, JSON Config" }
                ]
            },
            {
                phase: "Phase 2 : Backend Vulkan",
                desc: "Initialisation du contexte graphique.",
                steps: [
                    { id: "2.1", title: "Instance & Device", validation: "unit_test_02_vulkan_init.cpp", detail: "Validation Layers, Logical Device" },
                    { id: "2.2", title: "SwapChain", validation: "unit_test_03_swapchain.cpp", detail: "Surface SDL, ImageViews" }
                ]
            },
            {
                phase: "Phase 3 : Premier Triangle",
                desc: "Pipeline graphique basique.",
                steps: [
                    { id: "3.1", title: "Pipeline & RenderPass", validation: "unit_test_04_hello_triangle.cpp", detail: "Shaders SPIR-V, Dynamic Rendering" },
                    { id: "3.2", title: "Vertex Buffers & VMA", validation: "unit_test_05_vertex_buffer.cpp", detail: "Staging Buffers, VMA Allocation" }
                ]
            },
            {
                phase: "Phase 4 : Textures & Maths 3D",
                desc: "Passage à la 3D.",
                steps: [
                    { id: "4.1", title: "UBO & GLM", validation: "unit_test_06_rotating_cube.cpp", detail: "Matrices MVP, Descriptors" },
                    { id: "4.2", title: "Système de Textures", validation: "unit_test_07_texture_cube.cpp", detail: "Chargement Image (Caching), Samplers" }
                ]
            },
            {
                phase: "Phase 5 : Architecture Moteur",
                desc: "ECS, Jobs, Events et Assets.",
                steps: [
                    { id: "5.1", title: "Core Systems", validation: "unit_test_08_core_systems.cpp", detail: "JobSystem, EventBus" },
                    { id: "5.2", title: "Resource Manager", validation: "unit_test_09_load_gltf.cpp", detail: "tinygltf, Async Loading" },
                    { id: "5.3", title: "ECS & Scene", validation: "unit_test_10_ecs_scene.cpp", detail: "Entity, Component, Transform" },
                    { id: "5.4", title: "Sérialisation", validation: "unit_test_11_serialization.cpp", detail: "JSON Save/Load externe" }
                ]
            },
            {
                phase: "Phase 6 : Fonctionnalités Avancées",
                desc: "Gameplay et Rendu PBR.",
                steps: [
                    { id: "6.1", title: "PBR & Env", validation: "unit_test_12_pbr_environment.cpp", detail: "Shaders PBR, Skybox, Shadows" },
                    { id: "6.2", title: "Physique & Audio", validation: "unit_test_13_physics_audio.cpp", detail: "Jolt (Sync Rule), miniaudio" },
                    { id: "6.3", title: "FX & Terrain", validation: "unit_test_14_terrain_fx.cpp", detail: "Heightmap, Particles" },
                    { id: "6.4", title: "Outils", validation: "unit_test_15_tools_hotreload.cpp", detail: "ImGui, Input Mapping" }
                ]
            }
        ];

        const standardsData = [
            { type: "cpp", title: "C++20 Hybrid", desc: "Modules pour l'interne (vitesse de build), Headers pour l'API publique (compatibilité)." },
            { type: "perf", title: "Zero-Copy", desc: "Utiliser `std::string_view` et `std::span` systématiquement." },
            { type: "cpp", title: "Conteneurs", desc: "`std::vector` par défaut. `std::list` interdite (Cache friendly)." },
            { type: "arch", title: "Sérialisation", desc: "Non-Intrusive uniquement. Pas de méthode `virtual serialize()`." },
            { type: "perf", title: "Hot Path Safety", desc: "Aucune allocation dynamique dans `update()` ou `render()`." },
            { type: "arch", title: "API Fluent", desc: "Chaînage de méthodes pour la configuration et la création d'entités." },
            { type: "arch", title: "Defaults", desc: "Tous les composants doivent avoir des valeurs par défaut fonctionnelles." },
            { type: "cpp", title: "Smart Pointers", desc: "`bb3d::Ref` (shared) et `bb3d::Scope` (unique) pour la sémantique RAII." },
            { type: "perf", title: "Profiling", desc: "Macros `BB_PROFILE_SCOPE` (Tracy) obligatoires sur les fonctions lourdes." }
        ];

        // --- UI LOGIC ---

        // View Switching
        function switchView(viewName) {
            // Hide all views
            document.querySelectorAll('.view-section').forEach(el => el.classList.add('hidden'));
            // Show selected
            document.getElementById(`view-${viewName}`).classList.remove('hidden');
            
            // Update Nav Tabs
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('tab-active', 'text-slate-900');
                btn.classList.add('text-slate-500');
            });
            const activeBtn = document.getElementById(`nav-${viewName}`);
            activeBtn.classList.add('tab-active', 'text-slate-900');
            activeBtn.classList.remove('text-slate-500');

            // Trigger Charts resize if Dashboard
            if(viewName === 'dashboard' && window.philosophyChartInst) {
                window.philosophyChartInst.resize();
                window.structureChartInst.resize();
            }
        }

        // Architecture Interactivity
        function selectArchLayer(layerId) {
            const data = architectureData[layerId];
            const placeholder = document.getElementById('arch-details-placeholder');
            const content = document.getElementById('arch-details-content');
            
            placeholder.classList.add('hidden');
            content.classList.remove('hidden');
            
            content.innerHTML = `
                <div class="mb-4">
                    <h3 class="text-2xl font-bold ${data.color}">${data.title}</h3>
                    <p class="text-slate-600 italic mt-2">${data.desc}</p>
                </div>
                <div class="space-y-4">
                    ${data.details.map(d => `
                        <div class="bg-slate-50 p-3 rounded border border-slate-100">
                            <span class="text-xs font-bold text-slate-400 uppercase tracking-wider block">${d.label}</span>
                            <span class="text-sm font-medium text-slate-800">${d.value}</span>
                        </div>
                    `).join('')}
                </div>
            `;
        }

        // Standards Filtering
        function filterStandards(type) {
            const grid = document.getElementById('standards-grid');
            grid.innerHTML = '';
            
            // Update buttons
            document.querySelectorAll('.std-filter').forEach(btn => {
                btn.classList.remove('active', 'bg-slate-200', 'text-slate-800');
                btn.classList.add('bg-white', 'text-slate-600');
            });
            event.target.classList.remove('bg-white', 'text-slate-600');
            event.target.classList.add('active', 'bg-slate-200', 'text-slate-800');

            const filtered = type === 'all' ? standardsData : standardsData.filter(s => s.type === type);
            
            filtered.forEach(item => {
                let badgeClass = "bg-slate-100 text-slate-600";
                if(item.type === 'perf') badgeClass = "bg-red-50 text-red-600 border border-red-100";
                if(item.type === 'arch') badgeClass = "bg-blue-50 text-blue-600 border border-blue-100";
                if(item.type === 'cpp') badgeClass = "bg-orange-50 text-orange-600 border border-orange-100";

                const card = document.createElement('div');
                card.className = "bg-white p-6 rounded-lg shadow-sm border border-slate-200 hover:shadow-md transition-shadow";
                card.innerHTML = `
                    <div class="flex justify-between items-start mb-3">
                        <span class="px-2 py-1 rounded text-xs font-bold uppercase ${badgeClass}">${item.type}</span>
                    </div>
                    <h4 class="font-bold text-slate-900 mb-2">${item.title}</h4>
                    <p class="text-sm text-slate-500 leading-relaxed">${item.desc}</p>
                `;
                grid.appendChild(card);
            });
        }

        // Roadmap Generation
        function renderRoadmap() {
            const container = document.getElementById('roadmap-container');
            roadmapData.forEach((phase, index) => {
                const phaseEl = document.createElement('div');
                phaseEl.className = "relative pl-8 pb-8";
                
                // Timeline Dot
                phaseEl.innerHTML = `
                    <div class="absolute -left-[9px] top-0 w-4 h-4 rounded-full bg-orange-500 border-4 border-white shadow-sm"></div>
                    <div class="bg-white p-6 rounded-xl border border-slate-200 shadow-sm hover:border-orange-300 transition-colors cursor-pointer group" onclick="this.classList.toggle('active')">
                        <div class="flex justify-between items-center mb-2">
                            <h3 class="text-lg font-bold text-slate-900">${phase.phase}</h3>
                            <i class="fa-solid fa-chevron-down text-slate-300 group-[.active]:rotate-180 transition-transform"></i>
                        </div>
                        <p class="text-sm text-slate-500 mb-4">${phase.desc}</p>
                        
                        <div class="hidden group-[.active]:block space-y-3 mt-4 pt-4 border-t border-slate-100 animate-fade-in">
                            ${phase.steps.map(step => `
                                <div class="flex items-start gap-3">
                                    <div class="mt-1 min-w-[30px] text-xs font-mono font-bold text-orange-600 bg-orange-50 px-1 py-0.5 rounded text-center">${step.id}</div>
                                    <div>
                                        <div class="text-sm font-bold text-slate-800">${step.title}</div>
                                        <div class="text-xs text-slate-500">${step.detail}</div>
                                        <div class="mt-1 inline-flex items-center text-xs font-mono text-green-600 bg-green-50 px-2 py-0.5 rounded border border-green-100">
                                            <i class="fa-solid fa-flask mr-1.5"></i>${step.validation}
                                        </div>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
                container.appendChild(phaseEl);
            });
        }

        // --- INIT ---
        document.addEventListener('DOMContentLoaded', () => {
            // 1. Charts
            const ctxRadar = document.getElementById('philosophyChart').getContext('2d');
            window.philosophyChartInst = new Chart(ctxRadar, {
                type: 'radar',
                data: {
                    labels: ['Performance', 'Abstraction', 'Modularité', 'Sécurité Type', 'DX (Fluent API)'],
                    datasets: [{
                        label: 'Score Cible',
                        data: [95, 90, 85, 80, 88],
                        backgroundColor: 'rgba(234, 88, 12, 0.2)',
                        borderColor: '#ea580c',
                        pointBackgroundColor: '#ea580c',
                        borderWidth: 2
                    }]
                },
                options: {
                    maintainAspectRatio: false,
                    scales: { r: { suggestedMin: 0, suggestedMax: 100 } },
                    plugins: { legend: { display: false } }
                }
            });

            const ctxDoughnut = document.getElementById('structureChart').getContext('2d');
            window.structureChartInst = new Chart(ctxDoughnut, {
                type: 'doughnut',
                data: {
                    labels: ['Core (Jobs, Events)', 'Backend (Vulkan)', 'Scene & Assets', 'Gameplay (Phys/Audio)'],
                    datasets: [{
                        data: [15, 35, 25, 25],
                        backgroundColor: ['#f97316', '#dc2626', '#2563eb', '#9333ea'],
                        borderWidth: 0
                    }]
                },
                options: {
                    maintainAspectRatio: false,
                    cutout: '70%',
                    plugins: { legend: { position: 'right' } }
                }
            });

            // 2. Init content
            renderRoadmap();
            filterStandards('all');
        });

    </script>
</body>
</html>